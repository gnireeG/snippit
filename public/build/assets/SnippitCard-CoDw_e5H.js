import{B,x as j,z as N,k as _,r as g,o as n,d as l,a as t,b as d,w as r,t as m,n as k,u as x,m as C,e as b,f as E,F as I}from"./app-DtaABTlW.js";import{_ as w}from"./DialogModal-BxqpCYZC.js";import{_ as M}from"./CodeMirror-CKFDwyIF.js";const S=B.create();S.interceptors.response.use(e=>e,e=>{var a,u;const p=((u=(a=e.response)==null?void 0:a.data)==null?void 0:u.message)||"An error occurred";return j.commit("addAlert",{type:"error",message:p}),Promise.reject(e)});const V={class:"bg-secondary rounded-lg px-4 py-3 flex flex-col jusitfy-between shadow-lg snippit-card"},P={class:"flex justify-between"},W={class:"heading-3"},z=["title"],F={class:"mt-2"},q={class:"flex justify-between items-center mt-4 border-t dark:border-slate-600 border-slate-400 pt-4"},H={class:"flex gap-2"},O=t("i",{class:"bi bi-eye"},null,-1),G=[O],J={key:0,class:"bi bi-copy"},K={key:1,class:"bi bi-clipboard-check"},L=t("i",{class:"bi bi-trash"},null,-1),Q=[L],R=["draggable"],U=t("i",{class:"bi bi-folder-symlink"},null,-1),X=[U],Y={class:"heading-3"},Z={class:"bg-slate-50 text-gray-800 h-[75vh]"},ee={key:0,class:"bi bi-copy"},te={key:1,class:"bi bi-clipboard-check"},se=t("h3",{class:"heading-3"},"Delete Snippit",-1),ie=t("p",null,"Are you sure you want to delete this snippit?",-1),le={__name:"SnippitCard",props:{snippit:Object,draggable:{type:Boolean,default:!1},deleteAble:{type:Boolean,default:!1}},setup(e){const p=N(),a=e;function u(i){i.dataTransfer.setData("event","moveSnippit"),i.dataTransfer.setData("snippitId",a.snippit.id);let o=i.target.closest(".snippit-card"),s=o.querySelector(".devicon").cloneNode(!0);document.body.appendChild(s),s.style.position="fixed",s.style.width=`${s.offsetWidth}px`,s.style.height=`${s.offsetHeight}px`,i.dataTransfer.setDragImage(s,5,5),i.dataTransfer.onend=function(){document.body.removeChild(s),i.target.style.opacity="",o.style.opacity="1"}}const v=_(()=>!!navigator.clipboard),y=()=>{navigator.clipboard.writeText(a.snippit.code),h.value=!0,setTimeout(()=>{h.value=!1},2e3)},f=g(!1);function D(){f.value=!0}const $=_(()=>{const i=[{original:"css",replacement:"css3"},{original:"html",replacement:"html5"},{original:"c++",replacement:"cplusplus"}];let o=a.snippit.language;const s=i.find(A=>A.original===a.snippit.language);return s&&(o=s.replacement),`devicon-${o}-plain colored`}),c=g(!1);function T(){c.value=!1,S.delete(route("app.snippit.destroy",{id:a.snippit.id})).then(i=>{console.log(i),p.commit("removeSnippit",{snippitId:a.snippit.id}),p.commit("addAlert",{type:"success",message:i.data.message})})}const h=g(!1);return(i,o)=>(n(),l(I,null,[t("div",V,[d(x(C),{href:i.route("app.snippit.showEdit",{id:e.snippit.id}),class:"h-full"},{default:r(()=>[t("div",P,[t("h3",W,m(e.snippit.title),1),t("i",{class:k([$.value,"text-2xl devicon"]),title:e.snippit.language},null,10,z)]),t("p",F,m(e.snippit.description),1)]),_:1},8,["href"]),t("div",q,[t("div",H,[t("button",{class:"btn btn-icon",title:"Preview Code",onClick:D},G),v.value?(n(),l("button",{key:0,class:"btn btn-icon",title:"Copy Code to clipboard",onClick:y},[h.value?(n(),l("i",K)):(n(),l("i",J))])):b("",!0),e.deleteAble?(n(),l("button",{key:1,class:"btn btn-icon",title:"Delete Snippit",onClick:o[0]||(o[0]=s=>c.value=!0)},Q)):b("",!0)]),e.draggable?(n(),l("div",{key:0,title:"Move Snippit to another folder",class:k([e.draggable?"cursor-move":""]),draggable:e.draggable,onDragstart:u},X,42,R)):b("",!0)])]),d(w,{show:f.value,onClose:o[1]||(o[1]=s=>f.value=!1),maxWidth:"4xl"},{title:r(()=>[t("h3",Y,m(e.snippit.title),1)]),content:r(()=>[t("div",Z,[d(M,{snippit:e.snippit,readonly:!0},null,8,["snippit"])])]),footer:r(()=>[d(x(C),{class:"textlink",href:i.route("app.snippit.showEdit",{id:e.snippit.id})},{default:r(()=>[E("Edit snippit")]),_:1},8,["href"]),v.value?(n(),l("button",{key:0,class:"btn btn-icon",title:"Copy Code to clipboard",onClick:y},[h.value?(n(),l("i",te)):(n(),l("i",ee))])):b("",!0)]),_:1},8,["show"]),d(w,{show:c.value,onClose:o[3]||(o[3]=s=>c.value=!1),maxWidth:"lg"},{title:r(()=>[se]),content:r(()=>[ie]),footer:r(()=>[t("button",{class:"btn",onClick:o[2]||(o[2]=s=>c.value=!1)},"Cancel"),t("button",{class:"btn btn-danger",onClick:T},"Delete")]),_:1},8,["show"])],64))}};export{le as _,S as h};
