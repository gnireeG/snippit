import{A as O}from"./AppLayout-DYg7kmZO.js";import{_ as A}from"./CodeMirror-B19A6hs5.js";import{_ as q}from"./InputComponent-BmfPxMl2.js";import{k as T,r as b,A as V,E as S,o as r,d as u,q as _,G as D,a,t as k,y as j,F as $,g as L,e as C,n as U,C as F,D as N,I as B,c as E,w as z,O as M,b as w,f as I}from"./app-BIYzwX-g.js";import"./DropdownLink-CGGjj1-r.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K=["placeholder","required","readonly"],P={key:0,class:"absolute top-8 right-4 text-gray-400 text-xl",style:{"pointer-events":"none"}},J=a("i",{class:"bi bi-chevron-down"},null,-1),G=[J],H=a("i",{class:"bi bi-x"},null,-1),R=[H],Q={key:2,class:"absolute w-full bg-primary max-h-48 overflow-auto shadow-md z-10"},W=["title","onMousedown"],X={__name:"InputSearch",props:{label:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},choices:{type:Object,required:!0},modelValue:String},emits:["select"],setup(l,{expose:y,emit:v}){const n=l,s=T(()=>n.choices.filter(p=>p.name.toLowerCase().includes(d.value.toLowerCase()))),d=b(""),e=b(null),i=b(!1);function x(p){e.value=p,t("select",p)}function m(){i.value=!1,e.value?d.value=e.value.name:d.value=""}function f(){e.value=null,d.value="",t("select",{id:null,name:""})}const t=v,o=b(null),c=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return V(()=>{var p;o.value.hasAttribute("autofocus")&&o.value.focus(),d.value=((p=n.choices.find(g=>g.id==n.modelValue))==null?void 0:p.name)??"",e.value=n.choices.find(g=>g.id==n.modelValue)??null}),S(()=>n.modelValue,p=>{var g;d.value=((g=n.choices.find(h=>h.id==p))==null?void 0:g.name)??""}),y({focus:()=>o.value.focus()}),(p,g)=>(r(),u("div",{class:U(["relative",[l.label?"pt-4":""]])},[_(a("label",{class:"absolute top-1.5 left-4 bg-secondary px-1.5 py-0",for:c},k(l.label),513),[[D,l.label&&!l.placeholder||l.label&&l.placeholder&&d.value.length>0]]),_(a("input",{id:c,ref_key:"input",ref:o,class:"border-gray-300 dark:border-gray-700 bg-transparent dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-0 dark:focus:ring-0 rounded-md shadow-sm px-4 py-4 w-full","onUpdate:modelValue":g[0]||(g[0]=h=>d.value=h),placeholder:l.placeholder,type:"text",required:l.required,readonly:l.readonly,onFocus:g[1]||(g[1]=h=>i.value=!0),onFocusout:m,spellcheck:"false"},null,40,K),[[j,d.value]]),e.value==null?(r(),u("button",P,G)):(r(),u("button",{key:1,title:"Clear selection",class:"absolute top-8 right-4 text-gray-400 text-xl",onClick:f},R)),i.value?(r(),u("div",Q,[a("ul",null,[(r(!0),u($,null,L(s.value,h=>(r(),u("li",null,[a("button",{title:"Select "+h.name,class:"bg-primary hover py-2 px-4 w-full text-left",onMousedown:me=>x(h)},k(h.name),41,W)]))),256))])])):C("",!0)],2))}},Y={class:"border border-gray-300 dark:border-gray-700 bg-transparent dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-0 dark:focus:ring-0 rounded-md shadow-sm w-full flex gap-1 items-center px-4 flex-wrap"},Z=["placeholder"],ee={key:0,class:"mb-4 flex gap-1 flex-wrap"},te={class:"rounded-md bg-primary px-1 py-0.5 flex gap-1 items-center"},le=["title","onClick"],ae=a("i",{class:"bi bi-x"},null,-1),ne=[ae],oe={__name:"InputTag",props:{label:{type:String,default:null},placeholder:{type:String,default:null},tags:{type:Object,default:[]}},emits:["update"],setup(l,{emit:y}){const v=l,n=b(""),s=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){n.value.length>0&&(i.value.push(n.value),n.value="")}function e(m){i.value=i.value.filter(f=>f!==m)}const i=b([]);V(()=>{i.value=v.tags}),S(()=>i.value,m=>{x("update",m)}),S(()=>v.tags,m=>{i.value=m});const x=y;return(m,f)=>(r(),u("div",{class:U(["relative",[l.label?"pt-4":""]])},[_(a("label",{class:"absolute top-1.5 left-4 bg-secondary px-1.5 py-0",for:s},k(l.label),513),[[D,l.label&&!l.placeholder||l.label&&l.placeholder&&(i.value.length>0||n.value.length>0)]]),a("div",Y,[_(a("input",{type:"text",class:"py-4 pl-0 bg-transparent border-0 w-full focus:border-0 focus:ring-0",placeholder:l.placeholder,id:s,"onUpdate:modelValue":f[0]||(f[0]=t=>n.value=t),onKeydown:F(d,["enter"])},null,40,Z),[[j,n.value]]),i.value.length>0?(r(),u("div",ee,[(r(!0),u($,null,L(i.value,t=>(r(),u("div",te,[a("p",null,k(t),1),a("button",{title:"Remove Tag "+t,onClick:o=>e(t)},ne,8,le)]))),256))])):C("",!0)])],2))}},se={class:"flex gap-4 mt-8 w-100 max-w-full flex-col lg:flex-row"},ie={class:"bg-secondary p-4 rounded-md shadow-md w-full lg:w-96 flex flex-col gap-2 flex-shrink-0"},de=a("p",{class:"mt-2"},"Location",-1),re={class:"text-gray-500"},ue={class:"whitespace-nowrap"},ce={key:0,class:"bi bi-chevron-right text-sm px-1.5"},pe={class:"bg-secondary rounded-md shadow-md flex-grow editor-container overflow-hidden p-4"},xe={__name:"Editor",props:{snippit:{type:Object,required:!1,default:null},parentFolder:{type:Object,required:!0},path:{type:Object,required:!0}},setup(l){function y(t){e.tags=t}function v(){e.title.length>3&&(d.value?M.post(route("app.snippit.store"),e):M.post(route("app.snippit.update"),e))}function n(t){e.code=t.code}const s=l,d=T(()=>s.snippit===null);S(d,t=>{m()});const e=N({title:"",description:"",code:"",language:"",folder_id:null,id:null,tags:[]}),i=b([{id:"javascript",name:"JavaScript"},{id:"php",name:"PHP"},{id:"html",name:"HTML"},{id:"css",name:"CSS"},{id:"python",name:"Python"},{id:"java",name:"Java"},{id:"cpp",name:"C++"},{id:"go",name:"Go"},{id:"rust",name:"Rust"},{id:"json",name:"JSON"},{id:"xml",name:"XML"},{id:"markdown",name:"Markdown"},{id:"sql",name:"SQL"},{id:"yaml",name:"YAML"},{id:"liquid",name:"Liquid"},{id:"less",name:"Less"},{id:"vue",name:"Vue"},{id:"sass",name:"Sass"},{id:"angular",name:"Angular"},{id:"lezer",name:"Lezer"},{id:"wast",name:"Wast"},{id:"plaintext",name:"Plaintext"}].sort((t,o)=>t.name.localeCompare(o.name)));function x(t){e.language=t.id}V(()=>{m(),document.addEventListener("keydown",f)}),B(()=>{document.removeEventListener("keydown",f)});function m(){e.folder_id=s.parentFolder.id,s.snippit&&(e.title=s.snippit.title,e.description=s.snippit.description,e.code=s.snippit.code,e.language=s.snippit.language,e.id=s.snippit.id,e.tags=s.snippit.tags?s.snippit.tags.map(t=>t.name.en):[])}function f(t){t.key==="s"&&t.ctrlKey&&(t.preventDefault(),v())}return(t,o)=>(r(),E(O,{title:e.title||"Create new Snippit"},{default:z(()=>[a("div",null,[a("div",se,[a("div",ie,[w(q,{modelValue:e.title,"onUpdate:modelValue":o[0]||(o[0]=c=>e.title=c),type:"text",placeholder:"Title",label:"Title",required:""},null,8,["modelValue"]),w(q,{modelValue:e.description,"onUpdate:modelValue":o[1]||(o[1]=c=>e.description=c),type:"textarea",placeholder:"Description",label:"Description",required:""},null,8,["modelValue"]),w(X,{modelValue:e.language,"onUpdate:modelValue":o[2]||(o[2]=c=>e.language=c),placeholder:"Language",label:"Language",choices:i.value,onSelect:x},null,8,["modelValue","choices"]),w(oe,{label:"Tags",placeholder:"Add Tags",onUpdate:y,tags:e.tags},null,8,["tags"]),de,a("p",re,[(r(!0),u($,null,L(l.path,(c,p)=>(r(),u("span",ue,[I(k(c.name),1),p<l.path.length-1?(r(),u("i",ce)):C("",!0)]))),256))]),a("div",{class:"flex justify-end w-full"},[a("button",{class:"btn btn-primary",onClick:v},"Save Snippit")])]),a("div",pe,[w(A,{onUpdateCode:o[3]||(o[3]=c=>n(c)),snippit:e},null,8,["snippit"])])])])]),_:1},8,["title"]))}};export{xe as default};
