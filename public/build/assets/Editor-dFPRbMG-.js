import{A as j}from"./AppLayout-xtzCMbkE.js";import{_ as T}from"./CodeMirror-CjupAmHn.js";import{I as S}from"./InputComponent-Dc0_iV3L.js";import{k as _,r as h,A as C,D as q,o as u,d as p,q as V,E as U,a as n,t as k,y as A,F as $,g as D,e as M,n as F,C as N,K as O,c as B,w as E,O as L,b as g,f as z}from"./app-BcPyWFwF.js";import{_ as I}from"./InputTag-Dlbg_zBw.js";import"./DropdownLink-BwdItVst.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P=["placeholder","required","readonly"],J={key:0,class:"absolute top-8 right-4 text-gray-400 text-xl",style:{"pointer-events":"none"}},K=n("i",{class:"bi bi-chevron-down"},null,-1),H=[K],G=n("i",{class:"bi bi-x"},null,-1),Q=[G],R={key:2,class:"absolute w-full bg-primary max-h-48 overflow-auto shadow-md z-10"},W=["title","onMousedown"],X={__name:"InputSearch",props:{label:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},choices:{type:Object,required:!0},modelValue:String},emits:["select"],setup(l,{expose:w,emit:v}){const c=l,o=_(()=>c.choices.filter(d=>d.name.toLowerCase().includes(s.value.toLowerCase()))),s=h(""),e=h(null),f=h(!1);function x(d){e.value=d,t("select",d)}function y(){f.value=!1,e.value?s.value=e.value.name:s.value=""}function b(){e.value=null,s.value="",t("select",{id:null,name:""})}const t=v,a=h(null),i=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return C(()=>{var d;a.value.hasAttribute("autofocus")&&a.value.focus(),s.value=((d=c.choices.find(r=>r.id==c.modelValue))==null?void 0:d.name)??"",e.value=c.choices.find(r=>r.id==c.modelValue)??null}),q(()=>c.modelValue,d=>{var r;s.value=((r=c.choices.find(m=>m.id==d))==null?void 0:r.name)??""}),w({focus:()=>a.value.focus()}),(d,r)=>(u(),p("div",{class:F(["relative",[l.label?"pt-4":""]])},[V(n("label",{class:"absolute top-1.5 left-4 bg-secondary px-1.5 py-0",for:i},k(l.label),513),[[U,l.label&&!l.placeholder||l.label&&l.placeholder&&s.value.length>0]]),V(n("input",{id:i,ref_key:"input",ref:a,class:"border-gray-300 dark:border-gray-700 bg-transparent dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-0 dark:focus:ring-0 rounded-md shadow-sm px-4 py-4 w-full","onUpdate:modelValue":r[0]||(r[0]=m=>s.value=m),placeholder:l.placeholder,type:"text",required:l.required,readonly:l.readonly,onFocus:r[1]||(r[1]=m=>f.value=!0),onFocusout:y,spellcheck:"false"},null,40,P),[[A,s.value]]),e.value==null?(u(),p("button",J,H)):(u(),p("button",{key:1,title:"Clear selection",class:"absolute top-8 right-4 text-gray-400 text-xl",onClick:b},Q)),f.value?(u(),p("div",R,[n("ul",null,[(u(!0),p($,null,D(o.value,m=>(u(),p("li",null,[n("button",{title:"Select "+m.name,class:"bg-primary hover py-2 px-4 w-full text-left",onMousedown:oe=>x(m)},k(m.name),41,W)]))),256))])])):M("",!0)],2))}},Y={class:"flex gap-4 mt-8 w-100 max-w-full flex-col lg:flex-row"},Z={class:"bg-secondary p-4 rounded-md shadow-md w-full lg:w-96 flex flex-col gap-2 flex-shrink-0"},ee=n("p",{class:"mt-2"},"Location",-1),te={class:"text-gray-500"},ae={class:"whitespace-nowrap"},le={key:0,class:"bi bi-chevron-right text-sm px-1.5"},ne={class:"bg-secondary rounded-md shadow-md flex-grow editor-container overflow-hidden p-4"},me={__name:"Editor",props:{snippit:{type:Object,required:!1,default:null},parentFolder:{type:Object,required:!0},path:{type:Object,required:!0}},setup(l){function w(t){e.tags=t}function v(){e.title.length>3&&(s.value?L.post(route("app.snippit.store"),e):L.post(route("app.snippit.update"),e))}function c(t){e.code=t.code}const o=l,s=_(()=>o.snippit===null);q(s,t=>{y()});const e=N({title:"",description:"",code:"",language:"",folder_id:null,id:null,tags:[]}),f=h([{id:"javascript",name:"JavaScript"},{id:"php",name:"PHP"},{id:"html",name:"HTML"},{id:"css",name:"CSS"},{id:"python",name:"Python"},{id:"java",name:"Java"},{id:"cpp",name:"C++"},{id:"go",name:"Go"},{id:"rust",name:"Rust"},{id:"json",name:"JSON"},{id:"xml",name:"XML"},{id:"markdown",name:"Markdown"},{id:"sql",name:"SQL"},{id:"yaml",name:"YAML"},{id:"liquid",name:"Liquid"},{id:"less",name:"Less"},{id:"vue",name:"Vue"},{id:"sass",name:"Sass"},{id:"angular",name:"Angular"},{id:"lezer",name:"Lezer"},{id:"wast",name:"Wast"},{id:"plaintext",name:"Plaintext"}].sort((t,a)=>t.name.localeCompare(a.name)));function x(t){e.language=t.id}C(()=>{y(),document.addEventListener("keydown",b)}),O(()=>{document.removeEventListener("keydown",b)});function y(){e.folder_id=o.parentFolder.id,o.snippit&&(e.title=o.snippit.title,e.description=o.snippit.description,e.code=o.snippit.code,e.language=o.snippit.language,e.id=o.snippit.id,e.tags=o.snippit.tags?o.snippit.tags.map(t=>t.name.en):[])}function b(t){t.key==="s"&&t.ctrlKey&&(t.preventDefault(),v())}return(t,a)=>(u(),B(j,{title:e.title||"Create new Snippit"},{default:E(()=>[n("div",null,[n("div",Y,[n("div",Z,[g(S,{modelValue:e.title,"onUpdate:modelValue":a[0]||(a[0]=i=>e.title=i),type:"text",placeholder:"Title",label:"Title",required:""},null,8,["modelValue"]),g(S,{modelValue:e.description,"onUpdate:modelValue":a[1]||(a[1]=i=>e.description=i),type:"textarea",placeholder:"Description",label:"Description",required:""},null,8,["modelValue"]),g(X,{modelValue:e.language,"onUpdate:modelValue":a[2]||(a[2]=i=>e.language=i),placeholder:"Language",label:"Language",choices:f.value,onSelect:x},null,8,["modelValue","choices"]),g(I,{label:"Tags",placeholder:"Add Tags",onUpdate:w,tags:e.tags},null,8,["tags"]),ee,n("p",te,[(u(!0),p($,null,D(l.path,(i,d)=>(u(),p("span",ae,[z(k(i.name),1),d<l.path.length-1?(u(),p("i",le)):M("",!0)]))),256))]),n("div",{class:"flex justify-end w-full"},[n("button",{class:"btn btn-primary",onClick:v},"Save Snippit")])]),n("div",ne,[g(T,{onUpdateCode:a[3]||(a[3]=i=>c(i)),snippit:e},null,8,["snippit"])])])])]),_:1},8,["title"]))}};export{me as default};
