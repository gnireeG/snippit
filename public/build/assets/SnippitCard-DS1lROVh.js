import{o as n,d as o,F as S,g as N,c as E,w as r,f as $,t as f,u as y,m as v,e as p,B as I,x as M,z as V,k,r as m,a as t,b as d,n as C}from"./app-BIYzwX-g.js";import{_ as w}from"./DialogModal-Btf5kZxw.js";import{_ as P}from"./CodeMirror-B19A6hs5.js";const W={key:0,class:"flex gap-1 flex-wrap"},z={__name:"TagContainer",props:{tags:{type:Array,default:[]}},setup(e){return(u,l)=>e.tags.length>0?(n(),o("div",W,[(n(!0),o(S,null,N(e.tags,c=>(n(),E(y(v),{key:c.id,href:"#",class:"rounded-md bg-primary px-1.5 py-0.5 text-sm"},{default:r(()=>[$(f(c.name.en),1)]),_:2},1024))),128))])):p("",!0)}},D=I.create();D.interceptors.response.use(e=>e,e=>{var l,c;const u=((c=(l=e.response)==null?void 0:l.data)==null?void 0:c.message)||"An error occurred";return M.commit("addAlert",{type:"error",message:u}),Promise.reject(e)});const F={class:"bg-secondary rounded-lg px-4 py-3 flex flex-col jusitfy-between shadow-lg snippit-card"},q={class:"flex justify-between"},H={class:"heading-3"},L=["title"],O={class:"mt-2"},G={key:0,class:"mt-2"},J={class:"flex justify-between items-center mt-4 border-t dark:border-slate-600 border-slate-400 pt-4"},K={class:"flex gap-2"},Q=t("i",{class:"bi bi-eye"},null,-1),R=[Q],U={key:0,class:"bi bi-copy"},X={key:1,class:"bi bi-clipboard-check"},Y=t("i",{class:"bi bi-trash"},null,-1),Z=[Y],ee=["draggable"],te=t("i",{class:"bi bi-folder-symlink"},null,-1),se=[te],ie={class:"heading-3"},ae={class:"bg-slate-50 text-gray-800 h-[75vh]"},ne={key:0,class:"bi bi-copy"},oe={key:1,class:"bi bi-clipboard-check"},le=t("h3",{class:"heading-3"},"Delete Snippit",-1),re=t("p",null,"Are you sure you want to delete this snippit?",-1),ue={__name:"SnippitCard",props:{snippit:Object,draggable:{type:Boolean,default:!1},deleteAble:{type:Boolean,default:!1}},setup(e){const u=V(),l=e;function c(i){i.dataTransfer.setData("event","moveSnippit"),i.dataTransfer.setData("snippitId",l.snippit.id);let a=i.target.closest(".snippit-card"),s=a.querySelector(".devicon").cloneNode(!0);document.body.appendChild(s),s.style.position="fixed",s.style.width=`${s.offsetWidth}px`,s.style.height=`${s.offsetHeight}px`,i.dataTransfer.setDragImage(s,5,5),i.dataTransfer.onend=function(){document.body.removeChild(s),i.target.style.opacity="",a.style.opacity="1"}}const _=k(()=>!!navigator.clipboard),x=()=>{navigator.clipboard.writeText(l.snippit.code),h.value=!0,setTimeout(()=>{h.value=!1},2e3)},b=m(!1);function T(){b.value=!0}const A=k(()=>{const i=[{original:"css",replacement:"css3"},{original:"html",replacement:"html5"},{original:"c++",replacement:"cplusplus"}];let a=l.snippit.language;const s=i.find(j=>j.original===l.snippit.language);return s&&(a=s.replacement),`devicon-${a}-plain colored`}),g=m(!1);function B(){g.value=!1,D.delete(route("app.snippit.destroy",{id:l.snippit.id})).then(i=>{console.log(i),u.commit("removeSnippit",{snippitId:l.snippit.id}),u.commit("addAlert",{type:"success",message:i.data.message})})}const h=m(!1);return(i,a)=>(n(),o(S,null,[t("div",F,[d(y(v),{href:i.route("app.snippit.showEdit",{id:e.snippit.id}),class:"h-full"},{default:r(()=>[t("div",q,[t("h3",H,f(e.snippit.title),1),t("i",{class:C([A.value,"text-2xl devicon"]),title:e.snippit.language},null,10,L)]),t("p",O,f(e.snippit.description),1)]),_:1},8,["href"]),e.snippit.tags?(n(),o("div",G,[d(z,{tags:e.snippit.tags},null,8,["tags"])])):p("",!0),t("div",J,[t("div",K,[t("button",{class:"btn btn-icon",title:"Preview Code",onClick:T},R),_.value?(n(),o("button",{key:0,class:"btn btn-icon",title:"Copy Code to clipboard",onClick:x},[h.value?(n(),o("i",X)):(n(),o("i",U))])):p("",!0),e.deleteAble?(n(),o("button",{key:1,class:"btn btn-icon",title:"Delete Snippit",onClick:a[0]||(a[0]=s=>g.value=!0)},Z)):p("",!0)]),e.draggable?(n(),o("div",{key:0,title:"Move Snippit to another folder",class:C([e.draggable?"cursor-move":""]),draggable:e.draggable,onDragstart:c},se,42,ee)):p("",!0)])]),d(w,{show:b.value,onClose:a[1]||(a[1]=s=>b.value=!1),maxWidth:"4xl"},{title:r(()=>[t("h3",ie,f(e.snippit.title),1)]),content:r(()=>[t("div",ae,[d(P,{snippit:e.snippit,readonly:!0},null,8,["snippit"])])]),footer:r(()=>[d(y(v),{class:"textlink",href:i.route("app.snippit.showEdit",{id:e.snippit.id})},{default:r(()=>[$("Edit snippit")]),_:1},8,["href"]),_.value?(n(),o("button",{key:0,class:"btn btn-icon",title:"Copy Code to clipboard",onClick:x},[h.value?(n(),o("i",oe)):(n(),o("i",ne))])):p("",!0)]),_:1},8,["show"]),d(w,{show:g.value,onClose:a[3]||(a[3]=s=>g.value=!1),maxWidth:"lg"},{title:r(()=>[le]),content:r(()=>[re]),footer:r(()=>[t("button",{class:"btn",onClick:a[2]||(a[2]=s=>g.value=!1)},"Cancel"),t("button",{class:"btn btn-danger",onClick:B},"Delete")]),_:1},8,["show"])],64))}};export{ue as _,D as h};
