import{A as j}from"./AppLayout-C1uODMaV.js";import{_ as B}from"./CodeMirror-DpY-DzQd.js";import{_ as S}from"./InputComponent-i5DvzUZi.js";import{k as _,r as g,B as q,E as C,o as r,d as u,q as V,G as F,a as n,t as k,z as N,F as $,g as D,e as M,n as O,D as U,I as A,c as E,w as T,O as L,b as w,f as z}from"./app-xjV7HbQ7.js";import"./DropdownLink-B9wMdZmR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P=["placeholder","required","readonly"],I={key:0,class:"absolute top-8 right-4 text-gray-400 text-xl",style:{"pointer-events":"none"}},J=n("i",{class:"bi bi-chevron-down"},null,-1),G=[J],H=n("i",{class:"bi bi-x"},null,-1),K=[H],Q={key:2,class:"absolute w-full bg-primary max-h-48 overflow-auto shadow-md"},R=["title","onMousedown"],W={__name:"InputSearch",props:{label:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},choices:{type:Object,required:!0},modelValue:String},emits:["select"],setup(l,{expose:h,emit:x}){const t=l,m=_(()=>t.choices.filter(d=>d.name.toLowerCase().includes(e.value.toLowerCase()))),e=g(""),c=g(null),f=g(!1);function v(d){c.value=d,i("select",d)}function y(){f.value=!1,c.value?e.value=c.value.name:e.value=""}function o(){c.value=null,e.value="",i("select",{id:null,name:""})}const i=x,a=g(null),b=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return q(()=>{var d;a.value.hasAttribute("autofocus")&&a.value.focus(),e.value=((d=t.choices.find(s=>s.id==t.modelValue))==null?void 0:d.name)??"",c.value=t.choices.find(s=>s.id==t.modelValue)??null}),C(()=>t.modelValue,d=>{var s;e.value=((s=t.choices.find(p=>p.id==d))==null?void 0:s.name)??""}),h({focus:()=>a.value.focus()}),(d,s)=>(r(),u("div",{class:O(["relative",[l.label?"pt-4":""]])},[V(n("label",{class:"absolute top-1.5 left-4 bg-secondary px-1.5 py-0",for:b},k(l.label),513),[[F,l.label&&!l.placeholder||l.label&&l.placeholder&&e.value.length>0]]),V(n("input",{id:b,ref_key:"input",ref:a,class:"border-gray-300 dark:border-gray-700 bg-transparent dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-0 dark:focus:ring-0 rounded-md shadow-sm px-4 py-4 w-full","onUpdate:modelValue":s[0]||(s[0]=p=>e.value=p),placeholder:l.placeholder,type:"text",required:l.required,readonly:l.readonly,onFocus:s[1]||(s[1]=p=>f.value=!0),onFocusout:y,spellcheck:"false"},null,40,P),[[N,e.value]]),c.value==null?(r(),u("button",I,G)):(r(),u("button",{key:1,title:"Clear selection",class:"absolute top-8 right-4 text-gray-400 text-xl",onClick:o},K)),f.value?(r(),u("div",Q,[n("ul",null,[(r(!0),u($,null,D(m.value,p=>(r(),u("li",null,[n("button",{title:"Select "+p.name,class:"bg-primary hover py-2 px-4 w-full text-left",onMousedown:ne=>v(p)},k(p.name),41,R)]))),256))])])):M("",!0)],2))}},X={class:"flex gap-4 mt-8 w-100 max-w-full flex-col lg:flex-row"},Y={class:"bg-secondary p-4 rounded-md shadow-md w-full lg:w-96 flex flex-col gap-2 flex-shrink-0"},Z=n("p",{class:"mt-2"},"Location",-1),ee={class:"text-gray-500"},te={class:"whitespace-nowrap"},le={key:0,class:"bi bi-chevron-right text-sm px-1.5"},ae={class:"bg-secondary rounded-md shadow-md flex-grow editor-container overflow-hidden p-4"},ce={__name:"Editor",props:{snippit:{type:Object,required:!1,default:null},parentFolder:{type:Object,required:!0},path:{type:Object,required:!0}},setup(l){function h(){console.log(m.value),e.title.length>3&&(m.value?L.post(route("app.snippit.store"),e):L.post(route("app.snippit.update"),e))}function x(o){e.code=o.code}const t=l,m=_(()=>t.snippit===null);C(m,o=>{v()});const e=U({title:"",description:"",code:"",language:"",folder_id:null,id:null}),c=g([{id:"javascript",name:"JavaScript"},{id:"php",name:"PHP"},{id:"html",name:"HTML"},{id:"css",name:"CSS"},{id:"python",name:"Python"},{id:"java",name:"Java"},{id:"cpp",name:"C++"},{id:"go",name:"Go"},{id:"rust",name:"Rust"},{id:"json",name:"JSON"},{id:"xml",name:"XML"},{id:"markdown",name:"Markdown"},{id:"sql",name:"SQL"},{id:"yaml",name:"YAML"},{id:"liquid",name:"Liquid"},{id:"less",name:"Less"},{id:"vue",name:"Vue"},{id:"sass",name:"Sass"},{id:"angular",name:"Angular"},{id:"lezer",name:"Lezer"},{id:"wast",name:"Wast"},{id:"plaintext",name:"Plaintext"}].sort((o,i)=>o.name.localeCompare(i.name)));function f(o){e.language=o.id}q(()=>{v(),document.addEventListener("keydown",y)}),A(()=>{document.removeEventListener("keydown",y)});function v(){e.folder_id=t.parentFolder.id,t.snippit&&(e.title=t.snippit.title,e.description=t.snippit.description,e.code=t.snippit.code,e.language=t.snippit.language,e.id=t.snippit.id)}function y(o){o.key==="s"&&o.ctrlKey&&(o.preventDefault(),h())}return(o,i)=>(r(),E(j,{title:e.title||"Create new Snippit"},{default:T(()=>[n("div",null,[n("div",X,[n("div",Y,[w(S,{modelValue:e.title,"onUpdate:modelValue":i[0]||(i[0]=a=>e.title=a),type:"text",placeholder:"Title",label:"Title",required:""},null,8,["modelValue"]),w(S,{modelValue:e.description,"onUpdate:modelValue":i[1]||(i[1]=a=>e.description=a),type:"textarea",placeholder:"Description",label:"Description",required:""},null,8,["modelValue"]),w(W,{modelValue:e.language,"onUpdate:modelValue":i[2]||(i[2]=a=>e.language=a),placeholder:"Language",label:"Language",choices:c.value,onSelect:f},null,8,["modelValue","choices"]),Z,n("p",ee,[(r(!0),u($,null,D(l.path,(a,b)=>(r(),u("span",te,[z(k(a.name),1),b<l.path.length-1?(r(),u("i",le)):M("",!0)]))),256))]),n("div",{class:"flex justify-end w-full"},[n("button",{class:"btn btn-primary",onClick:h},"Save Snippit")])]),n("div",ae,[w(B,{onUpdateCode:i[3]||(i[3]=a=>x(a)),snippit:e},null,8,["snippit"])])])])]),_:1},8,["title"]))}};export{ce as default};
